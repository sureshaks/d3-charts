var Global={font:"Segoe UI",color:"steelblue",axisColor:"gray"},Line=function(t){var i=this;this.data=t.data,this.x=t.x,this.y=t.y,"height"in t||(t.height=200),"width"in t||(t.width=200),"element"in t||(t.element="body"),"title"in t||(t.title="Line chart"),"font"in t||(t.font=Global.font),"xMin"in t||(t.xMin=d3.min(this.data,function(t){return t[i.x]})),"xMax"in t||(t.xMax=d3.max(this.data,function(t){return t[i.x]})),"xLabel"in t||(t.xLabel=t.x),"yMin"in t||(t.yMin=d3.min(this.data,function(t){return t[i.y]})),"yMax"in t||(t.yMax=d3.max(this.data,function(t){return t[i.y]})),"yLabel"in t||(t.yLabel=t.y),"axisColor"in t||(t.axisColor=Global.axisColor),"margin"in t||(t.margin={top:30,bottom:30,left:50,right:30}),"color"in t||(t.color=Global.color),this.height=t.height,this.width=t.width,this.element=t.element,this.xMin=t.xMin,this.xMax=t.xMax,this.xLabel=t.xLabel,this.yMin=t.yMin,this.yMax=t.yMax,this.yLabel=t.yLabel,this.title=t.title,this.margin=t.margin,this.font=t.font,this.color=t.color,this.axisColor=t.axisColor,this.draw()};Line.prototype.draw=function(){this.initialize(),this.createScales(),this.addAxes(),this.addLine()},Line.prototype.initialize=function(){var t=this.margin;d3.select(this.element).html(""),d3.select(this.element).append("center").text(this.title).style("font-weight","bold").style("font-family",this.font);var i=d3.select(this.element).append("svg");i.style("position","relative"),i.attr("width",this.width),i.attr("height",this.height),this.plot=i.append("g").attr("transform","translate("+t.left+","+t.top+")")},Line.prototype.createScales=function(){var t=this.margin,i=[this.xMin,this.xMax],e=[this.yMin,this.yMax];this.xScale=d3.scale.linear().range([0,this.width-t.right-t.left]).domain(i),this.yScale=d3.scale.linear().range([this.height-(t.top+t.bottom),0]).domain(e)},Line.prototype.addAxes=function(){var t=this.margin,i=d3.svg.axis().scale(this.xScale).orient("bottom").ticks(2),e=d3.svg.axis().scale(this.yScale).orient("left").ticks(2);this.plot.append("g").style("font-size","0.5em").attr("class","x axis").attr("transform","translate(0,"+(this.height-(t.top+t.bottom))+")").call(i),this.plot.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",(this.width-(t.left+t.right))/2).attr("y",this.height-t.bottom).attr("font-size","0.75em").text(this.xLabel),this.plot.append("g").style("font-size","0.5em").attr("class","y axis").call(e),this.plot.append("text").attr("class","y label").attr("text-anchor","end").attr("y",-1*t.left/2).attr("x",-1*(this.height-(t.top+t.bottom))/2).attr("font-size","0.75em").attr("transform","rotate(-90)").text(this.yLabel),this.plot.selectAll(".domain").style("fill","none"),this.plot.selectAll(".domain").style("stroke",this.axisColor),this.plot.selectAll(".domain").style("stroke-width","1px")},Line.prototype.addLine=function(){var t=this,i=d3.svg.line().x(function(i){return t.xScale(i[t.x])}).y(function(i){return t.yScale(i[t.y])});this.plot.append("path").datum(this.data).classed("line",!0).attr("d",i).attr("fill","none").style("stroke",this.color)};var Scatter=function(t){var i=this;this.data=t.data,this.x=t.x,this.y=t.y,"height"in t||(t.height=200),"width"in t||(t.width=200),"element"in t||(t.element="body"),"title"in t||(t.title="Scatter chart"),"font"in t||(t.font=Global.font),"xMin"in t||(t.xMin=d3.min(this.data,function(t){return t[i.x]})),"xMax"in t||(t.xMax=d3.max(this.data,function(t){return t[i.x]})),"xLabel"in t||(t.xLabel=t.x),"yMin"in t||(t.yMin=d3.min(this.data,function(t){return t[i.y]})),"yMax"in t||(t.yMax=d3.max(this.data,function(t){return t[i.y]})),"yLabel"in t||(t.yLabel=t.y),"margin"in t||(t.margin={top:30,bottom:30,left:50,right:30}),"color"in t||(t.color=Global.color),"axisColor"in t||(t.axisColor=Global.axisColor),this.height=t.height,this.width=t.width,this.element=t.element,this.xMin=t.xMin,this.xMax=t.xMax,this.xLabel=t.xLabel,this.yMin=t.yMin,this.yMax=t.yMax,this.yLabel=t.yLabel,this.title=t.title,this.margin=t.margin,this.font=t.font,this.color=t.color,this.axisColor=t.axisColor,this.draw()};Scatter.prototype.draw=function(){this.initialize(),this.createScales(),this.addAxes(),this.addPoints()},Scatter.prototype.initialize=function(){var t=this.margin;d3.select(this.element).html(""),d3.select(this.element).append("center").text(this.title).style("font-weight","bold").style("font-family",this.font);var i=d3.select(this.element).append("svg");i.style("position","relative"),i.attr("width",this.width),i.attr("height",this.height),this.plot=i.append("g").attr("transform","translate("+t.left+","+t.top+")")},Scatter.prototype.createScales=function(){var t=this.margin,i=[this.xMin,this.xMax],e=[this.yMin,this.yMax];this.xScale=d3.scale.linear().range([0,this.width-t.right-t.left]).domain(i),this.yScale=d3.scale.linear().range([this.height-(t.top+t.bottom),0]).domain(e)},Scatter.prototype.addAxes=function(){var t=this.margin,i=d3.svg.axis().scale(this.xScale).orient("bottom").ticks(2),e=d3.svg.axis().scale(this.yScale).orient("left").ticks(2);this.plot.append("g").style("font-size","0.5em").attr("class","x axis").attr("transform","translate(0,"+(this.height-(t.top+t.bottom))+")").call(i),this.plot.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",(this.width-(t.left+t.right))/2).attr("y",this.height-t.bottom).attr("font-size","0.75em").text(this.xLabel),this.plot.append("g").style("font-size","0.5em").attr("class","y axis").call(e),this.plot.append("text").attr("class","y label").attr("text-anchor","end").attr("y",-1*t.left/2).attr("x",-1*(this.height-(t.top+t.bottom))/2).attr("font-size","0.75em").attr("transform","rotate(-90)").text(this.yLabel),this.plot.selectAll(".domain").style("fill","none"),this.plot.selectAll(".domain").style("stroke",this.axisColor),this.plot.selectAll(".domain").style("stroke-width","1px")},Scatter.prototype.addPoints=function(){var t=this;this.plot.selectAll(".dot_").data(this.data).enter().append("circle").attr("class","dot_").attr("r",3.5).attr("fill",this.color).attr("cx",function(i){return t.xScale(i[t.x])}).attr("cy",function(i){return t.yScale(i[t.y])})};var Histogram=function(t){var i=this;this.data=t.data,this.x=t.x,"height"in t||(t.height=200),"width"in t||(t.width=200),"element"in t||(t.element="body"),"title"in t||(t.title="Histogram"),"font"in t||(t.font=Global.font),"xMin"in t||(t.xMin=d3.min(this.data,function(t){return t[i.x]})),"xMax"in t||(t.xMax=d3.max(this.data,function(t){return t[i.x]})),"xLabel"in t||(t.xLabel=t.x),this.group_by=d3.nest().key(function(t){return t[i.x]}).rollup(function(t){return t.length}).entries(this.data);var e=d3.sum(this.group_by,function(t){return t.values});this.group_by.forEach(function(t){t.relative_values=t.values/e}),"yLabel"in t||(t.yLabel="Count"),"margin"in t||(t.margin={top:30,bottom:30,left:50,right:30}),"color"in t||(t.color=Global.color),"axisColor"in t||(t.axisColor=Global.axisColor),this.height=t.height,this.width=t.width,this.element=t.element,this.xMin=t.xMin,this.xMax=t.xMax,this.xLabel=t.xLabel,this.yMin=0,this.yMax=e,this.yLabel=t.yLabel,this.title=t.title,this.margin=t.margin,this.font=t.font,this.color=t.color,this.axisColor=t.axisColor,this.draw()};Histogram.prototype.draw=function(){this.initialize(),this.createScales(),this.addAxes(),this.addBar()},Histogram.prototype.initialize=function(){var t=this.margin;d3.select(this.element).html(""),d3.select(this.element).append("center").text(this.title).style("font-weight","bold").style("font-family",this.font);var i=d3.select(this.element).append("svg");i.style("position","relative"),i.attr("width",this.width),i.attr("height",this.height),this.plot=i.append("g").attr("transform","translate("+t.left+","+t.top+")")},Histogram.prototype.createScales=function(){var t=this.margin,i=[this.xMin,this.xMax],e=[this.yMin,this.yMax];this.xScale=d3.scale.linear().range([0,this.width-t.right-t.left]).domain(i),this.yScale=d3.scale.linear().range([this.height-(t.top+t.bottom),0]).domain(e)},Histogram.prototype.addAxes=function(){var t=this.margin,i=d3.svg.axis().scale(this.xScale).orient("bottom").ticks(2),e=d3.svg.axis().scale(this.yScale).orient("left").ticks(2);this.plot.append("g").style("font-size","0.5em").attr("class","x axis").attr("transform","translate(0,"+(this.height-(t.top+t.bottom))+")").call(i),this.plot.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",(this.width-(t.left+t.right))/2).attr("y",this.height-t.bottom).attr("font-size","0.75em").text(this.xLabel),this.plot.append("g").style("font-size","0.5em").attr("class","y axis").call(e),this.plot.append("text").attr("class","y label").attr("text-anchor","end").attr("y",-1*t.left/2).attr("x",-1*(this.height-(t.top+t.bottom))/2).attr("font-size","0.75em").attr("transform","rotate(-90)").text(this.yLabel),this.plot.selectAll(".domain").style("fill","none"),this.plot.selectAll(".domain").style("stroke",this.axisColor),this.plot.selectAll(".domain").style("stroke-width","1px")},Histogram.prototype.addBar=function(){var t=this,i=this.margin;d3.layout.histogram().bins(this.xScale.ticks(10))(this.data);this.plot.selectAll(".bar-hist_").data(this.group_by).enter().append("g").attr("class","bar-hist_").attr("transform",function(i){return"translate("+t.xScale(parseFloat(i.key))+","+t.yScale(i.values)+")"}).append("rect").attr("width",10).attr("fill",this.color).attr("height",function(e){return t.height-(i.top+i.bottom)-t.yScale(e.values)})};var Bar=function(t){var i=this;this.data=t.data,this.x=t.x,this.y=t.y,"height"in t||(t.height=200),"width"in t||(t.width=200),"element"in t||(t.element="body"),"title"in t||(t.title="Bar chart"),"font"in t||(t.font=Global.font),"xLabel"in t||(t.xLabel=this.x),"yMin"in t||(t.yMin=d3.min(this.data,function(t){return t[i.y]})),"yMax"in t||(t.yMax=d3.max(this.data,function(t){return t[i.y]})),"yLabel"in t||(t.yLabel=this.y),"margin"in t||(t.margin={top:30,bottom:30,left:50,right:30}),"color"in t||(t.color=Global.color),"axisColor"in t||(t.axisColor=Global.axisColor),this.height=t.height,this.width=t.width,this.element=t.element,this.yMin=t.yMin,this.yMax=t.yMax,this.yLabel=t.yLabel,this.xDomain=d3.map(this.data,function(t){return t[i.x]}).keys(),this.xLabel=t.xLabel,this.title=t.title,this.margin=t.margin,this.font=t.font,this.color=t.color,this.axisColor=t.axisColor,this.draw()};Bar.prototype.draw=function(){this.initialize(),this.createScales(),this.addAxes(),this.addBar()},Bar.prototype.initialize=function(){var t=this.margin;d3.select(this.element).html(""),d3.select(this.element).append("center").text(this.title).style("font-weight","bold").style("font-family",this.font);var i=d3.select(this.element).append("svg");i.style("position","relative"),i.attr("width",this.width),i.attr("height",this.height),this.plot=i.append("g").attr("transform","translate("+t.left+","+t.top+")")},Bar.prototype.createScales=function(){var t=this.margin,i=(this.x,[this.yMin,this.yMax]);this.xScale=d3.scale.ordinal().rangePoints([0,this.width-t.right-t.left]).domain(this.xDomain),this.yScale=d3.scale.linear().range([this.height-(t.top+t.bottom),0]).domain(i)},Bar.prototype.addAxes=function(){var t=this.margin,i=d3.svg.axis().scale(this.xScale).orient("bottom").ticks(2),e=d3.svg.axis().scale(this.yScale).orient("left").ticks(2);this.plot.append("g").style("font-size","0.5em").attr("class","x axis").attr("transform","translate(0,"+(this.height-(t.top+t.bottom))+")").call(i),this.plot.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",(this.width-(t.left+t.right))/2).attr("y",this.height-t.bottom).attr("font-size","0.75em").text(this.xLabel),this.plot.append("g").style("font-size","0.5em").attr("class","y axis").call(e),this.plot.append("text").attr("class","y label").attr("text-anchor","end").attr("y",-1*t.left/2).attr("x",-1*(this.height-(t.top+t.bottom))/2).attr("font-size","0.75em").attr("transform","rotate(-90)").text(this.yLabel),this.plot.selectAll(".domain").style("fill","none"),this.plot.selectAll(".domain").style("stroke",this.axisColor),this.plot.selectAll(".domain").style("stroke-width","1px")},Bar.prototype.addBar=function(){var t=this,i=this.margin;this.plot.selectAll(".bar-chart_").data(this.data).enter().append("g").attr("class","bar-chart_").append("rect").attr("x",function(i){return t.xScale(i[t.x])}).attr("width",10).attr("fill",this.color).attr("y",function(i){return t.yScale(i[t.y])}).attr("height",function(e){return t.height-(i.top+i.bottom)-t.yScale(e[t.y])})};